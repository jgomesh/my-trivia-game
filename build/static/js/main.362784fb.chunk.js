(this["webpackJsonptrivia-react-redux"]=this["webpackJsonptrivia-react-redux"]||[]).push([[0],{28:function(e,t,a){e.exports=a.p+"static/media/clock.1c1d5a05.svg"},29:function(e,t,a){e.exports=a.p+"static/media/clock-danger.04a8e1fd.svg"},30:function(e,t,a){e.exports=a.p+"static/media/sad-feedback.35de1fda.svg"},31:function(e,t,a){e.exports=a.p+"static/media/happy-feedback.61ae0a25.svg"},32:function(e,t,a){e.exports=a.p+"static/media/trophy.21bade0f.svg"},36:function(e,t,a){e.exports=a(60)},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},49:function(e,t){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),o=a.n(c),i=a(12),s=a(23),l=a(2),u=a(15),m=a.n(u),d=a(19),p=a(20),_=a(4),f=a(5),g=a(7),h=a(6),v=function(){return fetch("https://opentdb.com/api_token.php?command=request").then((function(e){return e.json()})).then((function(e){return localStorage.setItem("token",e.token)})).catch((function(e){return console.log(e.message)}))};function b(e){return/\S+@\S+com/.test(e)}a(45);var E=function(e){Object(g.a)(a,e);var t=Object(h.a)(a);function a(){return Object(_.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"render",value:function(){var e=this.props,t=e.title,a=e.onClick,n=e.className,c=e.disabled,o=e.testId;return r.a.createElement("button",{type:"button",onClick:a,className:n,disabled:c,"data-testid":o},t)}}]),a}(n.Component),y=E;E.defaultProps={onClick:function(){},className:"",disabled:!1,testId:""};a(46);var k=function(e){Object(g.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(_.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={name:"",gravatarEmail:""},e.handleChange=function(t){var a=t.target,n=a.value,r=a.name;e.setState(Object(p.a)({},r,n))},e.isFormValid=function(){var t=e.state,a=t.name,n=t.gravatarEmail;return a&&b(n)},e.handleUserLogin=Object(d.a)(m.a.mark((function t(){var a,n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props,n=a.history,r=a.dispatchUserInfo,(0,a.resetUserPoints)(),r(e.state),t.next=5,v();case 5:n.push("/game");case 6:case"end":return t.stop()}}),t)}))),e.goToSettings=function(){e.props.history.push("/settings")},e}return Object(f.a)(a,[{key:"render",value:function(){var e=this.state,t=e.name,a=e.gravatarEmail;return r.a.createElement("main",{className:"login__container"},r.a.createElement("form",{className:"login__container__form",autoComplete:"off"},r.a.createElement("div",{className:"login__container__form__logo"}),r.a.createElement("input",{className:"login__container__form__input",placeholder:"Enter your name...",type:"text","data-testid":"input-player-name",value:t,name:"name",id:"name",onChange:this.handleChange}),r.a.createElement("input",{className:"login__container__form__input",type:"email",name:"gravatarEmail",id:"gravatarEmail",placeholder:"Enter your e-mail...",value:a,onChange:this.handleChange,"data-testid":"input-gravatar-email"}),r.a.createElement(y,{title:"PLAY",className:"login__container__form__btn",type:"button",testId:"btn-play",onClick:this.handleUserLogin,disabled:!this.isFormValid()}),r.a.createElement(y,{title:"Settings",className:"settings_btn",type:"button",testId:"btn-settings",onClick:this.goToSettings})))}}]),a}(r.a.Component),O=Object(i.b)(null,(function(e){return{dispatchUserInfo:function(t){return e(function(e){return{type:"SEND_USER_INFO",payload:e}}(t))},resetUserPoints:function(){return e({type:"RESET_USER_POINTS"})}}}))(k),j=a(17),N=a(3);var w=function(){var e=localStorage.getItem("token");return fetch("".concat("https://opentdb.com/api.php?amount=5&token=").concat(e)).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return console.error(e)}))};var S=function(e){var t=[].concat(Object(j.a)(null===e||void 0===e?void 0:e.incorrect_answers),[null===e||void 0===e?void 0:e.correct_answer]).sort((function(){return.5-Math.random()}));return Object(N.a)(Object(N.a)({},e),{},{sortedAnswers:t})},C=(a(47),function(e){Object(g.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(_.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).toggleQuestionClass=function(e,t,a){return e?e&&t.includes(a)?"wrong":"correct":""},e.toggleTestId=function(e,t,a){return e.incorrect_answers.includes(t)?"wrong-answer-".concat(a):"correct-answer"},e.calculatePoints=function(t,a){var n=e.props,r=n.timer,c=n.score;return t===a.correct_answer?c+(10+r*{easy:1,medium:2,hard:3}[a.difficulty]):c},e.calculateAssertions=function(t,a){var n=e.props.assertions;return t===a.correct_answer?n+1:n},e.calculateScore=function(t,a){return{points:e.calculatePoints(t,a),assertions:e.calculateAssertions(t,a)}},e}return Object(f.a)(a,[{key:"createMarkup",value:function(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value}},{key:"render",value:function(){var e=this,t=this.props,a=t.question,n=t.answered,c=t.handleClick,o=t.isDisabled,i=a.sortedAnswers;return r.a.createElement("div",{className:"question__container"},r.a.createElement("p",{className:"question__container__category","data-testid":"question-category"},a.category),r.a.createElement("p",{"data-testid":"question-text",className:"question__container__questionText"},this.createMarkup(a.question)),r.a.createElement("div",{className:"question__container__buttons__container","data-testid":"answer-options"},i.map((function(t,i){return r.a.createElement(y,{key:t,title:e.createMarkup(t),disabled:o,"data-testid":e.toggleTestId(a,t,i),className:e.toggleQuestionClass(n,a.incorrect_answers,t),onClick:function(){return c(e.calculateScore(t,a))}})}))))}}]),a}(n.Component)),I=Object(i.b)((function(e){return{score:e.player.score,assertions:e.player.assertions}}))(C),x=a(21),T=a.n(x),P=(a(50),function(e){Object(g.a)(a,e);var t=Object(h.a)(a);function a(){return Object(_.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"render",value:function(){var e=this.props,t=e.name,a=e.gravatarEmail,n=e.score,c=T()(a).toString();return r.a.createElement("header",{className:"header__container"},r.a.createElement("aside",{className:"header__container__aside"},r.a.createElement("img",{"data-testid":"header-profile-picture",alt:"profile",src:"".concat("https://www.gravatar.com/avatar/").concat(c)}),r.a.createElement("div",{className:"header__container__aside__playerName"},r.a.createElement("span",{"data-testid":"header-player-name"},t)),r.a.createElement("div",{className:"header__container__aside__playerScore"},r.a.createElement("p",null,"Player score:"),r.a.createElement("span",{"data-testid":"header-score"},n))))}}]),a}(n.Component)),q=Object(i.b)((function(e){return Object(N.a)({},e.player)}),null)(P);var A={clearTimer:function(e){clearInterval(e)}},U=a(28),R=a.n(U),D=a(29),M=a.n(D),F=(a(51),function(e){Object(g.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(_.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={questions:[],index:0,answered:!1,timer:30},e.timerCounter=function(){var t=setInterval((function(){if(0===e.state.timer)return e.setState({answered:!0}),A.clearTimer(t);e.setState((function(e){return Object(N.a)(Object(N.a)({},e),{},{timer:e.timer-1,intervalId:t})}))}),1e3)},e.increment=function(){var t=e.props,a=t.history,n=t.player,r=e.state,c=r.intervalId,o=r.index;if(A.clearTimer(c),e.setState((function(e){return Object(N.a)(Object(N.a)({},e),{},{index:e.index<4&&e.index+1,answered:!1,timer:30})}),(function(){return e.timerCounter()})),4===o)if(a.push("/feedback"),localStorage.getItem("ranking")){var i=JSON.parse(localStorage.getItem("ranking"));localStorage.setItem("ranking",JSON.stringify([].concat(Object(j.a)(i),[n])))}else localStorage.setItem("ranking",JSON.stringify([n]))},e.setPoints=function(t,a){(0,e.props.sendGameInfo)(t,a)},e.handleAnswerClick=function(t){var a=t.points,n=t.assertions;e.setState({answered:!0}),e.setPoints(a,n)},e}return Object(f.a)(a,[{key:"componentDidMount",value:function(){var e=Object(d.a)(m.a.mark((function e(){var t,a,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.history,e.next=3,w();case 3:a=e.sent,(n=a.results).length||(localStorage.removeItem("token"),t.push("/")),r=n.map(S),this.setState((function(e){return Object(N.a)(Object(N.a)({},e),{},{questions:Object(j.a)(r)})})),this.timerCounter();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e=this.state.intervalId;A.clearTimer(e)}},{key:"render",value:function(){var e=this.state,t=e.index,a=e.questions,n=e.answered,c=e.timer;return r.a.createElement("div",{className:"game__container"},r.a.createElement(q,null),r.a.createElement("main",{className:"game__container__question__container"},r.a.createElement("div",{className:"game__container__timer__container"},r.a.createElement("img",{src:c<=10?M.a:R.a,alt:"clock icon"}),r.a.createElement("h1",{className:c<=10?"danger":""},c)),!!a.length&&r.a.createElement(I,{question:a[t],answered:n,handleClick:this.handleAnswerClick,isDisabled:!c||n,timer:c}),n&&r.a.createElement(y,{className:"game__container__nextAnswerButton",type:"button",title:"Next",testId:"btn-next",onClick:this.increment})))}}]),a}(n.Component)),J=Object(i.b)((function(e){return Object(N.a)({},e)}),(function(e){return{sendGameInfo:function(t,a){return e(function(e,t){return{type:"SEND_USER_GAME_INFO",payload:{score:e,assertions:t}}}(t,a))}}}))(F),G=function(e){Object(g.a)(a,e);var t=Object(h.a)(a);function a(){return Object(_.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"render",value:function(){return r.a.createElement("h1",{"data-testid":"settings-title"},"Settings")}}]),a}(n.Component),L=(a(52),a(30)),W=a.n(L),B=a(31),Q=a.n(B),V=function(e){Object(g.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(_.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).redirect=function(t){e.props.history.push(t)},e}return Object(f.a)(a,[{key:"toggleFeedbackText",value:function(e){return e<3?"Could be better...":"Well Done!"}},{key:"render",value:function(){var e=this,t=this.props,a=t.assertions,n=t.score;return r.a.createElement("div",{className:"feedback__container"},r.a.createElement(q,null),r.a.createElement("main",{className:"feedback__container__content"},r.a.createElement("div",{className:"feedback__container__content__header"},r.a.createElement("h1",{"data-testid":"feedback-text",className:"feedback__container__content__feedbackText"},this.toggleFeedbackText(a)),r.a.createElement("img",{src:a<3?W.a:Q.a,alt:a<3?"sad neon emote":"happy neon emote"})),r.a.createElement("p",{"data-testid":"feedback-total-question",className:"feedback__container__assertions"},"Right answers: ".concat(a)),r.a.createElement("p",{"data-testid":"feedback-total-score",className:"feedback__container__score"},"Final score: ".concat(n)),r.a.createElement("div",{className:"feedback__container__content__buttonsContainer"},r.a.createElement(y,{type:"button",title:"Play Again",testId:"btn-play-again",onClick:function(){return e.redirect("/")}}),r.a.createElement(y,{type:"button",title:"Ranking",testId:"btn-ranking",onClick:function(){return e.redirect("/ranking")}}))))}}]),a}(n.Component),H=Object(i.b)((function(e){return{assertions:e.player.assertions,score:e.player.score}}))(V),Y=a(32),z=a.n(Y),K=(a(53),function(e){Object(g.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(_.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={ranking:[]},e.redirect=function(t){e.props.history.push(t)},e}return Object(f.a)(a,[{key:"componentDidMount",value:function(){var e=JSON.parse(localStorage.getItem("ranking")),t=null===e||void 0===e?void 0:e.sort((function(e,t){return t.score-e.score}));this.setState({ranking:t})}},{key:"generateProfilePicUrl",value:function(e){return"https://www.gravatar.com/avatar/"+T()(e).toString()}},{key:"render",value:function(){var e=this,t=this.state.ranking;return r.a.createElement("div",{className:"ranking__container"},r.a.createElement("div",{className:"ranking__container__title__container"},r.a.createElement("h1",{"data-testid":"ranking-title"},"Ranking"),r.a.createElement("img",{src:z.a,alt:"trophy"})),r.a.createElement("div",{className:"ranking__container__content__container"},!!(null===t||void 0===t?void 0:t.length)&&(null===t||void 0===t?void 0:t.map((function(t,a){return r.a.createElement("div",{className:"ranking__container__content__container__user__info",key:t.name+t.score},r.a.createElement("div",{className:"profile-pic"},r.a.createElement("img",{src:e.generateProfilePicUrl(t.gravatarEmail),alt:"".concat(t.name," gravatar")})),r.a.createElement("div",{className:"text-info"},r.a.createElement("p",{"data-testid":"player-name-".concat(a)},t.name),r.a.createElement("p",{"data-testid":"player-score-".concat(a)},"Score: ".concat(t.score))))})))),r.a.createElement(y,{title:"Play again",type:"button","data-testid":"btn-go-home",onClick:function(){return e.redirect("/")}}))}}]),a}(n.Component));function X(){return r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:"/my-trivia-game/",component:O}),r.a.createElement(l.a,{path:"/game",component:J}),r.a.createElement(l.a,{path:"/settings",component:G}),r.a.createElement(l.a,{path:"/feedback",component:H}),r.a.createElement(l.a,{path:"/ranking",component:K}))}var Z=a(14),$=a(34),ee=a(35),te={name:"",assertions:0,score:0,gravatarEmail:""},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEND_USER_INFO":return Object(N.a)(Object(N.a)({},e),{},{name:t.payload.name,gravatarEmail:t.payload.gravatarEmail});case"SEND_USER_GAME_INFO":return Object(N.a)(Object(N.a)({},e),{},{score:t.payload.score,assertions:t.payload.assertions});case"RESET_USER_POINTS":return te;default:return e}},ne=Object(Z.combineReducers)({player:ae}),re=Object(Z.legacy_createStore)(ne,Object($.composeWithDevTools)(Object(Z.applyMiddleware)(ee.a)));window.Cypress&&(window.store=re);var ce=re;a(59);o.a.render(r.a.createElement(i.a,{store:ce},r.a.createElement(s.a,null,r.a.createElement(X,null))),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.362784fb.chunk.js.map